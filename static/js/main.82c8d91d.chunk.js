(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(79)},49:function(e,t,a){},73:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},74:function(e,t,a){e.exports=a.p+"static/media/train-stop.85a2fb1b.png"},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(49),a(9)),i=a(10),u=a(12),s=a(11),m=a(13),f=a(23),p=a(15),d=a(14),b=a.n(d),g=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron"},e.children))},v=a(17),h=function(e){var t=Object(n.useState)(1),a=Object(v.a)(t,2),o=a[0],l=a[1];return r.a.createElement("form",null,r.a.createElement("input",{onChange:function(e){l(parseInt(e.target.value))},value:o}),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.changeIncrement(o)}},"Increment"),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.changeDecrement(o)}},"Decrement"))},E=a(24),y=Object(E.b)(function(e){return{ctr:e.counter}},function(e){return{onIncrementCounter:function(t){return e({type:"INCREMENT",value:t})},onDecrementCounter:function(t){return e({type:"DECREMENT",value:t})}}})(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{changeIncrement:e.onIncrementCounter,changeDecrement:e.onDecrementCounter}),r.a.createElement(g,null,e.ctr))}),O=function(e){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.b,{className:"nav-link",to:e.href},e.children,r.a.createElement("span",{className:"sr-only"},"(current)")))},D=function(e){var t=[["Home","home"],["Table","table"],["Form","form"],["Map","map"]],a=t.map(function(e,t){return r.a.createElement(O,{key:t,href:e[1]},e[0])});return r.a.createElement("ul",{className:"navbar-nav mr-auto",buttonlist:t},a)},N=function(e){return r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor01"},r.a.createElement(D,null))},S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Navbar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(N,null)))},j=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e.children))},w=(n.Component,a(2)),A=a.n(w);a(27),a(73);var C=function(e){var t=Object(n.useRef)(null);Object(n.useEffect)(function(){t.current=A.a.map("map",{center:[33.8,-117.8],zoom:16,layers:[A.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})]})},[]),Object(n.useRef)(null);var o=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useRef)(null),i=Object(n.useRef)(null),u=Object(n.useRef)(null),s=Object(n.useRef)(null);return Object(n.useEffect)(function(){if(console.log(e.gisData),l.current=A.a.icon({iconUrl:a(74),iconSize:[20,30],iconAnchor:[20,30],popupAnchor:[-3,-76],shadowSize:[68,95],shadowAnchor:[22,94]}),c.current=A.a.circle([33.8,-117.8],{color:"blue",fillColor:"#f03",fillOpacity:.5,radius:10}),t.current)if(e.gisData.length<1);else{i.current&&(t.current.removeControl(i.current),t.current.removeLayer(u.current),t.current.removeLayer(s.current)),o.current&&t.current.removeLayer(o.current);var n=e.gisData.map(function(e){return A.a.marker([e.geometry.y,e.geometry.x],{icon:l.current}).bindPopup(e.attributes.Station)});console.log(n),o.current=A.a.layerGroup(n),o.current.addTo(t.current);var r=[n[0].getLatLng()],m=A.a.latLngBounds(r);t.current.fitBounds(m);var f='Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',p="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw";u.current=A.a.tileLayer(p,{id:"mapbox.light",attribution:f}),s.current=A.a.tileLayer(p,{id:"mapbox.streets",attribution:f});var d={Grayscale:u.current,Streets:s.current},b={stops:o.current};i.current=A.a.control.layers(d,b),i.current.addTo(t.current),console.log(i.current)}},[e.markerPosition,e.gisData]),r.a.createElement("div",{id:"map"})},L=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(v.a)(c,2),u=i[0],s=i[1],m=Object(n.useState)("http://maps.lacity.org/lahub/rest/services/Metro_Bus_and_Rail/MapServer/1/query?"),f=Object(v.a)(m,2);f[0],f[1];console.log("Form Render");var p=e.stationList.map(function(e,t){return r.a.createElement(j,{key:t},e)});console.log(e.metrolinelist);var d=e.metrolineList.map(function(e,t){return r.a.createElement(j,{key:t},e)});return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.querySet(o,u)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label col-form-label-lg"},"Metroline"),r.a.createElement("select",{className:"form-control form-control-lg",onChange:function(e){l(e.target.value)},value:o},r.a.createElement("option",null," "),d)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label col-form-label-lg"},"Station"),r.a.createElement("select",{className:"form-control form-control-lg",onChange:function(e){s(e.target.value)},value:u},r.a.createElement("option",null),p),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Filter")))),r.a.createElement(C,{gisData:e.gisData}))},k=a(20),F=a(19),M=function(e){return r.a.createElement("td",null,e.children)},R=function(e){console.log(e.attributes);var t=Object(F.a)({},e.attributes);console.log(Object.keys(t));var a=Object.keys(t).map(function(e,a){return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,t[e]))});return r.a.createElement("tr",{className:"table-light"},a)},B=(a(75),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={sortedData:[],lastSortedField:"",sortfieldAsc:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("Table component did Mount"),this.sortDataHandler("OBJECTID","ASC"),this.setState({sortfieldAsc:!0})}},{key:"componentDidUpdate",value:function(){console.log("Table component did update")}},{key:"sortDataHandler",value:function(e,t){var a,n=[];"ASC"===t?(n=Object(k.a)(this.props.gisData.sort(function(t,a){return t.attributes[e]<a.attributes[e]?-1:t.attributes[e]>a.attributes[e]?1:0})),a=!1):"DESC"===t&&(n=Object(k.a)(this.props.gisData.sort(function(t,a){return t.attributes[e]<a.attributes[e]?1:t.attributes[e]>a.attributes[e]?-1:0})),a=!0),this.setState({sortedData:n,lastSortedField:e,sortfieldAsc:a})}},{key:"render",value:function(){var e=this,t=Object(k.a)(this.state.sortedData),a=Object(k.a)(this.props.fieldList),n=t.map(function(e,t){return r.a.createElement(R,{key:e.attributes.OBJECTID,attributes:e.attributes})});console.log("Table Render");var o=a.filter(function(e){return"Shape"!==e}).map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{key:a,scope:"col"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{className:"head-dropbtn"},t,r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("div",{className:"sort-div",onClick:function(){return e.sortDataHandler(t,"ASC")}},"ASC"),r.a.createElement("div",{className:"sort-div",onClick:function(){return e.sortDataHandler(t,"DESC")}},"DESC"))))))});return console.log(this.props.fieldList),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,o)),r.a.createElement("tbody",null,n))}}]),t}(n.Component));a(76),r.a.Component,a(77);var T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],query:"MetroLine = 'Expo Line'",fieldList:[],metrolineList:["Blue Line","Expo Line"],stationList:["a","b"],dataUrl:"http://maps.lacity.org/lahub/rest/services/Metro_Bus_and_Rail/MapServer/1/query?",markerPosition:[33.8,-117.8]},a.querySet=function(e,t){var n="";e&&t?n="MetroLine = '".concat(e,"' AND Station = '").concat(t,"'"):t?e||(n="Station = '".concat(t,"'")):n="MetroLine = '".concat(e,"'"),a.setState({query:n},function(){console.log(a.state.query);var e={params:{f:"json",outFields:"*",where:a.state.query,returnGeometry:"true",outSR:"4326",orderByFields:"MetroLine",returnDistinctValues:!1}};b.a.get(a.state.dataUrl,e).then(function(e){console.log(e.data);var t=e.data.features.map(function(e){return e});a.setState({data:t})})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Main component did mount");b.a.get(this.state.dataUrl,{params:{f:"json",outFields:"*",where:"1<>1",returnGeometry:"true",outSpatialReference:4326,orderByFields:"MetroLine"}}).then(function(t){var a=t.data.features.map(function(e){return e});e.setState({data:a})}),b.a.get("http://maps.lacity.org/lahub/rest/services/Metro_Bus_and_Rail/MapServer/1/?f=pjson").then(function(t){var a=t.data.fields.map(function(e){return e.name});console.log(a),e.setState({fieldList:a})});b.a.get(this.state.dataUrl,{params:{f:"json",where:"1=1",returnGeometry:"false",outFields:"MetroLine",orderByFields:"MetroLine",returnDistinctValues:!0}}).then(function(t){console.log("form first query Component did Mount"),console.log(t.data.features);var a=t.data.features.map(function(e){return e.attributes.MetroLine});e.setState({metrolineList:a})});b.a.get(this.state.dataUrl,{params:{f:"json",where:"1=1",returnGeometry:"false",outFields:"Station",orderByFields:"Station",returnDistinctValues:!0}}).then(function(t){console.log("Form second query component did mount"),console.log(t.data.features);var a=t.data.features.map(function(e){return e.attributes.Station});e.setState({stationList:a})})}},{key:"componentDidUpdate",value:function(e){console.log("Main Component DidUpdate"),console.log(e)}},{key:"render",value:function(){var e=this;return console.log("Main Render"),r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/home",exact:!0,render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null))}}),r.a.createElement(p.a,{path:"/form",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{gisData:e.state.data,metrolineList:e.state.metrolineList,stationList:e.state.stationList,querySet:e.querySet}),r.a.createElement("h3",null,"You have ",e.state.data.length," selected locations"))}}),r.a.createElement(p.a,{path:"/table",render:function(t){return r.a.createElement(B,{fieldList:e.state.fieldList,gisData:e.state.data})}}),r.a.createElement(p.a,{path:"/map",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{gisData:e.state.data,markerPosition:e.state.markerPosition}))}}))))}}]),t}(n.Component);a(78);var x=function(){return r.a.createElement("div",{className:"App container"},r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(22),q={counter:0},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return console.log(typeof t.value),Object(F.a)({},e,{counter:e.counter+t.value});case"DECREMENT":return Object(F.a)({},e,{counter:e.counter-t.value})}return e},H=Object(U.b)(z);l.a.render(r.a.createElement(E.a,{store:H},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.82c8d91d.chunk.js.map